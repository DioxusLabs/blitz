[package]
name = "blitz-ios-uikit"
version.workspace = true
license.workspace = true
homepage.workspace = true
repository.workspace = true
categories.workspace = true
edition.workspace = true
rust-version.workspace = true
description = "UIKit renderer for blitz-dom - maps DOM nodes to native iOS views"

[lib]
name = "blitz_ios_uikit"
path = "src/lib.rs"

# Note: inspo.rs is kept as reference code, not a runnable example
# It demonstrates UIKit patterns with objc2 but requires external Swift FFI

[features]
default = ["dioxus", "hot-reload"]
dioxus = ["dep:dioxus-native-dom", "dep:dioxus-core", "dep:blitz-net", "dep:tokio"]
hot-reload = ["dep:dioxus-devtools"]

[dependencies]
# Note: system_fonts enables CoreText font backend on iOS/macOS
# woff-rust enables pure-Rust WOFF font decoding for web fonts
# floats enables CSS float layout support
blitz-dom = { workspace = true, features = ["svg", "system_fonts", "woff-rust", "floats"]}
blitz-traits = { workspace = true }
rustc-hash = { workspace = true }
taffy = { workspace = true }
keyboard-types = { workspace = true }
markup5ever = { workspace = true }

# Dioxus integration (optional)
dioxus-native-dom = { workspace = true, optional = true }
dioxus-core = { workspace = true, optional = true }

# Networking for image loading (optional, enabled with dioxus feature)
blitz-net = { workspace = true, optional = true }
tokio = { version = "1", features = ["rt", "macros"], optional = true }

# Hot reload support (optional)
dioxus-devtools = { workspace = true, optional = true }

# Stylo (for computed styles)
style = { workspace = true }

# Async support for event loop integration
futures-util = { workspace = true }

# Window management
winit = { workspace = true }
raw-window-handle = "0.6"

[dev-dependencies]
blitz-html = { workspace = true }
blitz-net = { workspace = true }
winit = { workspace = true }
raw-window-handle = "0.6"
tokio = { version = "1", features = ["rt", "macros", "time", "full"] }
dioxus = { workspace = true }

# objc2 bindings for iOS (UIKit requires iOS or Mac Catalyst)
# For Mac Catalyst, build with: --target aarch64-apple-ios-macabi
[target.'cfg(target_os = "ios")'.dependencies]
objc2 = "0.6"
objc2-foundation = { version = "0.3", features = ["NSThread", "NSString", "NSDictionary", "NSSet", "NSEnumerator", "NSGeometry"] }
objc2-ui-kit = { version = "0.3", features = [
    "UIResponder",
    "UIView",
    "UIViewController",
    "UIWindow",
    "UIScreen",
    "UIApplication",
    "UIColor",
    "UILabel",
    "UIButton",
    "UIButtonConfiguration",
    "UIControl",
    "UITextField",
    "UITextInput",
    "UISwitch",
    "UIImageView",
    "UIScrollView",
    "UIImage",
    "UITouch",
    "UIEvent",
    "UIGestureRecognizer",
    "UIFont",
    "NSText",
    "NSAttributedString",
] }
objc2-quartz-core = { version = "0.3", features = ["CALayer"] }
objc2-core-foundation = { version = "0.3", features = ["CFData"] }
objc2-core-graphics = { version = "0.3", features = [
    "CGImage",
    "CGDataProvider",
    "CGColorSpace",
    "CGBitmapContext",  # for CGImageAlphaInfo
] }
